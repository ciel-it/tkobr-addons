<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record model="ir.ui.view" id="custom_attachment_form">
            <field name="name">Attachments</field>
            <field name="model">ir.attachment</field>
            <field name="inherit_id" ref="base.view_attachment_form"/>
            <field name="arch" type="xml">
                <group string="History" position="attributes">
                    <attribute name="invisible">1</attribute>
                </group>
                <group string="Attached To" position="attributes">
                    <attribute name="invisible">1</attribute>
                </group>
            </field>
        </record>

        <record model="ir.ui.view" id="view_document_file_form">
            <field name="name">ir.attachment</field>
            <field name="model">ir.attachment</field>
            <field name="inherit_id" ref="document.view_document_file_form"/>
            <field name="arch" type="xml">
                <group string="Indexed Content" position="attributes">
                    <attribute name="invisible">1</attribute>
                </group>
            </field>
        </record>

        <record model="ir.ui.view" id="tko_partner_attachment">
            <field name="name">Customer</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="Anexos">
                        <field name="attachment_ids" mode="kanban,tree">
                            <kanban>
                                <field name="file_type_icon"/>
                                <field name="url"/>
                                <field name="name"/>
                                <templates>
                                    <t t-name="kanban-box">
                                        <div class="oe_kanban_global_click">
                                            <div class="oe_kanban_vignette">
                                                <div class="oe_attachment">
                                                    <div t-if="record.file_type_icon.value != 'webimage'">
                                                        <img t-att-src="'/mail/static/src/img/mimetypes/' + record.file_type_icon.value + '.png'"/>
                                                    </div>
                                                    <div t-if="record.file_type_icon.value == 'webimage' and !record.url.value">
                                                        <img t-att-src="kanban_image('ir.attachment', 'datas', record.id.value)"/>
                                                    </div>
                                                    <div t-if="record.file_type_icon.value and record.url.value">
                                                        <img t-att-src="record.url.value"/>
                                                    </div>
                                                    <div class="oe_name">
                                                        <field name="name"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                            <tree>
                                <field name="name" context="{'form_view_ref':'custom_attachment_form'}"/>
                                <field name="type"/>
                                <field name="user_id"/>
                                <field name="write_date"/>
                            </tree>
                        </field>
                    </page>
                </notebook>

            </field>
        </record>

    </data>
</openerp>

